<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>土鸡蛋后台管理系统</title>
    <link href="assets/bootstrap.min.css" rel="stylesheet">
    <link href="assets/bootstrap-icons.css" rel="stylesheet">
    <style>
        :root {
            --primary-color: #FF6B35;
            --secondary-color: #FFA557;
            --success-color: #52B788;
            --warning-color: #FFB627;
            --danger-color: #E63946;
            --dark-color: #2D3142;
            --light-bg: #F8F9FA;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            /* Ensure default text on the whole page is readable */
            color: var(--dark-color);
            background-color: var(--light-bg);
        }
        
        .sidebar {
            min-height: 100vh;
            background: linear-gradient(180deg, #FF6B35 0%, #FF8F60 50%, #FFA557 100%);
            box-shadow: 2px 0 10px rgba(0,0,0,0.1);
        }
        
        .sidebar .brand {
            padding: 20px;
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            margin-bottom: 20px;
            border-radius: 0 0 20px 20px;
        }
        
        .sidebar .brand h4 {
            font-weight: 700;
            letter-spacing: 0.5px;
        }

        .sidebar .nav-link {
            color: #1a1d29 !important; /* 直接使用颜色值，不要用变量 */
            border-radius: 12px;
            margin: 4px 8px;
            padding: 12px 16px;
            transition: transform 0.2s ease, background 0.2s ease;
            font-weight: 500;
            will-change: transform;
        }

        .sidebar .nav-link:hover {
            color: white !important;
            background: rgba(255,255,255,0.2);
            transform: translateX(5px);
        }

        .sidebar .nav-link.active {
            color: white !important; /* 统一用白色 */
            background: rgba(255,255,255,0.25);
            transform: translateX(5px);
            font-weight: 600;
        }
        
        .main-content {
            background-color: #f5f7fa;
            min-height: 100vh;
            /* Make sure main content text is dark and readable */
            color: var(--dark-color);
        }
        
        .top-bar {
            background: white;
            padding: 20px 30px;
            border-radius: 0 0 20px 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
            margin-bottom: 30px;
        }
        
        .card {
            border: none;
            border-radius: 20px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            overflow: hidden;
            will-change: transform;
            /* Ensure card text is dark */
            color: var(--dark-color);
        }
        
        .card:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.12);
        }
        
        .btn-primary {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            border: none;
            border-radius: 12px;
            padding: 10px 24px;
            font-weight: 600;
            transition: transform 0.2s ease;
            box-shadow: 0 2px 8px rgba(255, 107, 53, 0.2);
        }
        
        .btn-primary:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(255, 107, 53, 0.3);
        }
        
        .btn-outline-primary {
            border: 2px solid var(--primary-color);
            color: var(--primary-color);
            border-radius: 12px;
            font-weight: 600;
            transition: background 0.2s ease, color 0.2s ease;
        }
        
        .btn-outline-primary:hover {
            background: var(--primary-color);
            color: white;
        }
        
        .btn-outline-danger {
            border: 2px solid var(--danger-color);
            color: var(--danger-color);
            border-radius: 12px;
            font-weight: 600;
        }
        
        .table {
            border-radius: 15px;
            overflow: hidden;
            background: white; /* keep table on white for clarity */
        }
        
        .table thead {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            color: white;
        }

        .table thead th {
            font-weight: 700;
            color: #fff;
            vertical-align: middle;
        }

        /* 强化表头对比：在需要时改为深蓝色，保证文字可读 */
        .table thead th {
            background: #1e73be !important; /* 深蓝，提升对比度 */
            color: #ffffff !important;
            border-right: 1px solid rgba(255,255,255,0.08);
            text-align: left;
        }

        /* 如果整个 thead 使用 gradient，保留但同时确保每个 th 有足够内边距 */
        .table thead th {
            padding: .75rem 1rem !important;
        }

        /* 加强 Bootstrap info 徽章（常见的浅蓝色圆点）的可读性 */
        .badge.bg-info, .badge.info {
            background: #12b5d6 !important; /* 更饱和的青色 */
            color: #ffffff !important;     /* 字体白色 */
            box-shadow: 0 2px 6px rgba(18,181,214,0.15);
            border: 0;
        }

        /* 若徽章文字较小，略微增加字体并居中 */
        .badge.bg-info {
            font-size: 0.95rem;
            min-width: 28px;
            height: 28px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            border-radius: 999px;
        }

        /* Make tbody text dark and readable */
        .table tbody td {
            color: var(--dark-color);
            vertical-align: middle;
        }

        .table tbody tr {
            transition: background-color 0.15s ease;
        }
        
        .table tbody tr:hover {
            background-color: rgba(255, 107, 53, 0.05);
        }
        
        .badge {
            border-radius: 20px;
            padding: 8px 16px;
            font-weight: 600;
            font-size: 0.85rem;
        }
        
        .badge.bg-success {
            background: var(--success-color) !important;
        }
        
        .badge.bg-warning {
            background: var(--warning-color) !important;
        }
        
        .badge.bg-danger {
            background: var(--danger-color) !important;
        }
        
        .badge.bg-primary {
            background: var(--primary-color) !important;
        }
        
        .loading {
            display: none;
            color: #6c757d; /* muted gray for loading text */
        }
        
        .page-section {
            display: none;
            color: var(--dark-color); /* ensure page sections inherit dark text */
        }
        
        .page-section.active {
            display: block;
        }
        
        /* 仪表盘卡片美化 */
        #dashboard .card {
            background: white;
            position: relative;
            overflow: hidden;
        }
        
        #dashboard .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
        }
        
        #dashboard .card-body {
            padding: 25px;
        }
        
        #dashboard .card i {
            font-size: 3rem;
            opacity: 0.8;
        }
        
        #dashboard .card h3 {
            font-weight: 700;
            color: var(--dark-color);
        }
        
        #dashboard .card h5 {
            color: #6c757d;
            font-weight: 600;
        }

        /* Make modal content text dark */
        .modal-content {
            color: var(--dark-color);
            background: #fff;
        }

        /* Improve contrast for small muted text */
        .text-muted {
            color: #6c757d !important;
        }

        /* Ensure links/buttons in tables are visible */
        .table a {
            color: var(--primary-color);
            font-weight: 600;
            text-decoration: none;
        }

        .table a:hover {
            text-decoration: underline;
        }

        /* 覆盖 Bootstrap 的 .table-light（默认白底），确保表头始终有高对比度背景 */
        .table thead.table-light,
        .table thead.table-light th {
            background: #1e73be !important; /* 深蓝色背景 */
            color: #fff !important;          /* 白色文字 */
            border-bottom: 2px solid rgba(0,0,0,0.08) !important;
        }

        /* 如果表头内部有 .text-primary/.text-white 等辅助类，优先保证可读性 */
        .table thead.table-light th * {
            color: #fff !important;
        }

        /* 确保表格行上的圆形徽章在白底上有足够对比 */
        .table tbody td .badge {
            box-shadow: 0 1px 0 rgba(0,0,0,0.04);
        }

        /* 最后兜底：避免任何 thead 被意外设置为纯白 */
        .table thead th[style], .table thead th[class] {
            background: #1e73be !important;
            color: #fff !important;
        }

        /* 表头增加内阴影和底部分隔，提升与表体的分离感 */
        .table thead th {
            box-shadow: inset 0 -6px 12px rgba(0,0,0,0.04);
        }

        /* 表格内的操作按钮视觉增强：圆形、固定大小，图标颜色确保对比 */
        .table .btn {
            padding: 6px;
            border-radius: 50%;
            width: 36px;
            height: 36px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            line-height: 1;
        }

        .table .btn .bi {
            font-size: 1.05rem;
        }

        /* 确保 outline 按钮在白背景下图标与边框可见 */
        .table .btn-outline-danger {
            background: #fff !important;
            color: var(--danger-color) !important;
            border: 2px solid rgba(230,57,70,0.18) !important;
        }

        .table .btn-outline-primary {
            background: #fff !important;
            color: var(--primary-color) !important;
            border: 2px solid rgba(255,107,53,0.18) !important;
        }

        .table .btn-outline-danger .bi, .table .btn-outline-primary .bi {
            color: inherit !important;
        }
    </style>
</head>
<body>
    <div class="container-fluid">
        <div class="row">
            <!-- 侧边栏 -->
            <div class="col-md-3 col-lg-2 sidebar p-0">
                <div class="brand">
                    <h4 class="text-white mb-0 text-center">
                        <i class="bi bi-egg-fill me-2"></i>
                        土鸡蛋后台
                    </h4>
                </div>
                <div class="p-3">
                    <nav class="nav flex-column">
                        <a class="nav-link" href="#" onclick="showPage('dashboard')">
                            <i class="bi bi-speedometer2 me-2"></i>仪表盘
                        </a>
                        <a class="nav-link" href="#" onclick="showPage('users')">
                            <i class="bi bi-people me-2"></i>用户管理
                        </a>
                        <a class="nav-link" href="#" onclick="showPage('roles')">
                            <i class="bi bi-shield-check me-2"></i>角色管理
                        </a>
                        <a class="nav-link" href="#" onclick="showPage('permissions')">
                            <i class="bi bi-key me-2"></i>权限管理
                        </a>
                        <a class="nav-link" href="#" onclick="showPage('tasks')">
                            <i class="bi bi-list-task me-2"></i>任务管理
                        </a>
                        <a class="nav-link" href="#" onclick="showPage('top-items')">
                            <i class="bi bi-award me-2"></i>十大事项管理
                        </a>
                        <a class="nav-link" href="#" onclick="showPage('logs')">
                            <i class="bi bi-journal-text me-2"></i>日志管理
                        </a>
                    </nav>
                </div>
            </div>

            <!-- 主内容区 -->
            <div class="col-md-9 col-lg-10 main-content">
                <div class="p-4">
                    <!-- 顶部导航 -->
                    <div class="top-bar d-flex justify-content-between align-items-center">
                        <div>
                            <h2 id="page-title" class="mb-1" style="color: var(--dark-color); font-weight: 700;">
                                <i class="bi bi-speedometer2 me-2" style="color: var(--primary-color);"></i>仪表盘
                            </h2>
                            <small class="text-muted">系统数据总览</small>
                        </div>
                        <div class="d-flex align-items-center">
                            <span class="me-3" style="font-weight: 500;">
                                <i class="bi bi-person-circle me-1" style="color: var(--primary-color);"></i>
                                欢迎，<strong id="current-user">管理员</strong>
                            </span>
                            <button class="btn btn-outline-danger btn-sm" onclick="logout()" style="border-radius: 10px;">
                                <i class="bi bi-box-arrow-right me-1"></i>退出登录
                            </button>
                        </div>
                    </div>

                    <!-- 仪表盘页面 -->
                    <div id="dashboard" class="page-section active">
                        <div class="row mb-4">
                            <div class="col-md-3">
                                <div class="card text-center">
                                    <div class="card-body">
                                        <i class="bi bi-people text-primary" style="font-size: 2rem;"></i>
                                        <h5 class="mt-2">总用户数</h5>
                                        <h3 id="total-users">-</h3>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="card text-center">
                                    <div class="card-body">
                                        <i class="bi bi-list-task text-success" style="font-size: 2rem;"></i>
                                        <h5 class="mt-2">总任务数</h5>
                                        <h3 id="total-tasks">-</h3>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="card text-center">
                                    <div class="card-body">
                                        <i class="bi bi-journal-text text-warning" style="font-size: 2rem;"></i>
                                        <h5 class="mt-2">总日志数</h5>
                                        <h3 id="total-logs">-</h3>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="card text-center">
                                    <div class="card-body">
                                        <i class="bi bi-shield-check text-info" style="font-size: 2rem;"></i>
                                        <h5 class="mt-2">角色数量</h5>
                                        <h3 id="total-roles">-</h3>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 用户管理页面 -->
                    <div id="users" class="page-section">
                        <div class="d-flex justify-content-between align-items-center mb-3">
                            <h4>用户管理</h4>
                            <button class="btn btn-primary" onclick="showUserModal()">
                                <i class="bi bi-plus-circle me-1"></i>添加用户
                            </button>
                        </div>
                        <div class="card">
                            <div class="card-body">
                                <div class="table-responsive">
                                    <table class="table table-hover">
                                        <thead class="table-light">
                                            <tr>
                                                <th>用户名</th>
                                                <th>真实姓名</th>
                                                <th>邮箱</th>
                                                <th>角色</th>
                                                <th>状态</th>
                                                <th>操作</th>
                                            </tr>
                                        </thead>
                                        <tbody id="users-table">
                                            <tr>
                                                <td colspan="6" class="text-center">加载中...</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 角色管理页面 -->
                    <div id="roles" class="page-section">
                        <div class="d-flex justify-content-between align-items-center mb-3">
                            <h4>角色管理</h4>
                            <button class="btn btn-primary" onclick="showRoleModal()">
                                <i class="bi bi-plus-circle me-1"></i>添加角色
                            </button>
                        </div>
                        <div class="card">
                            <div class="card-body">
                                <div class="table-responsive">
                                    <table class="table table-hover">
                                        <thead class="table-light">
                                            <tr>
                                                <th>角色名称</th>
                                                <th>描述</th>
                                                <th>用户数量</th>
                                                <th>创建时间</th>
                                                <th>操作</th>
                                            </tr>
                                        </thead>
                                        <tbody id="roles-table">
                                            <tr>
                                                <td colspan="5" class="text-center">加载中...</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 权限管理页面 -->
                    <div id="permissions" class="page-section">
                        <div class="d-flex justify-content-between align-items-center mb-3">
                            <h4>权限管理</h4>
                            <button class="btn btn-primary" onclick="showPermissionModal()">
                                <i class="bi bi-plus-circle me-1"></i>添加权限
                            </button>
                        </div>
                        <div class="card">
                            <div class="card-body">
                                <div class="table-responsive">
                                    <table class="table table-hover">
                                        <thead class="table-light">
                                            <tr>
                                                <th>权限名称</th>
                                                <th>权限键</th>
                                                <th>模块</th>
                                                <th>描述</th>
                                                <th>操作</th>
                                            </tr>
                                        </thead>
                                        <tbody id="permissions-table">
                                            <tr>
                                                <td colspan="5" class="text-center">加载中...</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 任务管理页面 -->
                    <div id="tasks" class="page-section">
                        <div class="d-flex justify-content-between align-items-center mb-3">
                            <h4>任务管理</h4>
                            <button class="btn btn-primary" onclick="showTaskModal()">
                                <i class="bi bi-plus-circle me-1"></i>新建任务
                            </button>
                        </div>
                        <div class="card">
                            <div class="card-body">
                                <div class="table-responsive">
                                    <table class="table table-hover">
                                        <thead class="table-light">
                                            <tr>
                                                <th>任务名称</th>
                                                <th>优先级</th>
                                                <th>进度</th>
                                                <th>负责人</th>
                                                <th>截止时间</th>
                                                <th>状态</th>
                                                <th>操作</th>
                                            </tr>
                                        </thead>
                                        <tbody id="tasks-table">
                                            <tr>
                                                <td colspan="7" class="text-center">加载中...</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 十大事项管理页面 -->
                    <div id="top-items" class="page-section">
                        <div class="d-flex justify-content-between align-items-center mb-3">
                            <h4>公司十大事项管理</h4>
                            <button class="btn btn-primary" onclick="showTopItemModal()">
                                <i class="bi bi-plus-circle me-1"></i>新建事项
                            </button>
                        </div>
                        <div class="card">
                            <div class="card-body">
                                <div class="table-responsive">
                                    <table class="table table-hover">
                                        <thead class="table-light">
                                            <tr>
                                                <th>排序</th>
                                                <th>事项</th>
                                                <th>状态</th>
                                                <th>创建人</th>
                                                <th>创建时间</th>
                                                <th>操作</th>
                                            </tr>
                                        </thead>
                                        <tbody id="top-items-table">
                                            <tr>
                                                <td colspan="6" class="text-center">加载中...</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 日志管理页面 -->
                    <div id="logs" class="page-section">
                        <div class="d-flex justify-content-between align-items-center mb-3">
                            <h4>日志管理</h4>
                        </div>
                        <div class="card">
                            <div class="card-body">
                                <div class="table-responsive">
                                    <table class="table table-hover">
                                        <thead class="table-light">
                                            <tr>
                                                <th>内容</th>
                                                <th>优先级</th>
                                                <th>作者</th>
                                                <th>时间</th>
                                                <th>关联任务</th>
                                                <th>操作</th>
                                            </tr>
                                        </thead>
                                        <tbody id="logs-table">
                                            <tr>
                                                <td colspan="6" class="text-center">加载中...</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 用户编辑模态框 -->
    <div class="modal fade" id="userModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="userModalTitle">添加用户</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="userForm">
                        <div class="mb-3">
                            <label class="form-label">用户名</label>
                            <input type="text" class="form-control" id="username" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">密码</label>
                            <input type="password" class="form-control" id="password" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">真实姓名</label>
                            <input type="text" class="form-control" id="realName" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">邮箱</label>
                            <input type="email" class="form-control" id="email">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">电话</label>
                            <input type="tel" class="form-control" id="phone">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">职位</label>
                            <input type="text" class="form-control" id="position">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">角色</label>
                            <select class="form-select" id="userRoles" multiple>
                                <!-- 动态加载角色选项 -->
                            </select>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">取消</button>
                    <button type="button" class="btn btn-primary" onclick="saveUser()">保存</button>
                </div>
            </div>
        </div>
    </div>

    <!-- 角色编辑模态框 -->
    <div class="modal fade" id="roleModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="roleModalTitle">添加角色</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="roleForm">
                        <div class="mb-3">
                            <label class="form-label">角色名称</label>
                            <input type="text" class="form-control" id="roleName" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">描述</label>
                            <textarea class="form-control" id="roleDescription" rows="3"></textarea>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">权限</label>
                            <div id="permissions-list">
                                <!-- 动态加载权限选项 -->
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">取消</button>
                    <button type="button" class="btn btn-primary" onclick="saveRole()">保存</button>
                </div>
            </div>
        </div>
    </div>

    <!-- 权限编辑模态框 -->
    <div class="modal fade" id="permissionModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="permissionModalTitle">添加权限</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="permissionForm">
                        <div class="mb-3">
                            <label class="form-label">权限键</label>
                            <input type="text" class="form-control" id="permKey" placeholder="例如: user:create" required>
                            <small class="text-muted">格式：模块:操作，例如 user:create, role:edit</small>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">权限名称</label>
                            <input type="text" class="form-control" id="permName" placeholder="例如: 创建用户" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">模块</label>
                            <select class="form-select" id="permModule" required>
                                <option value="">请选择模块</option>
                                <option value="user_management">用户管理</option>
                                <option value="role_management">角色管理</option>
                                <option value="task_management">任务管理</option>
                                <option value="log_management">日志管理</option>
                                <option value="system_management">系统管理</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">描述</label>
                            <textarea class="form-control" id="permDescription" rows="2" placeholder="权限的详细描述"></textarea>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">取消</button>
                    <button type="button" class="btn btn-primary" onclick="savePermission()">保存</button>
                </div>
            </div>
        </div>
    </div>

    <!-- 任务编辑模态框 -->
    <div class="modal fade" id="taskModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="taskModalTitle">新建任务</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="taskForm">
                        <div class="mb-3">
                            <label class="form-label">任务名称 <span class="text-danger">*</span></label>
                            <input type="text" class="form-control" id="taskName" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">任务描述</label>
                            <textarea class="form-control" id="taskDescription" rows="3"></textarea>
                        </div>
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label class="form-label">优先级</label>
                                <select class="form-select" id="taskPriority">
                                    <option value="low">低</option>
                                    <option value="medium">中</option>
                                    <option value="high">高</option>
                                </select>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label class="form-label">状态</label>
                                <select class="form-select" id="taskStatus">
                                    <option value="pending">待处理</option>
                                    <option value="in_progress">进行中</option>
                                    <option value="completed">已完成</option>
                                    <option value="cancelled">已取消</option>
                                </select>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">负责人</label>
                            <select class="form-select" id="taskAssignee">
                                <option value="">未分配</option>
                                <!-- 动态加载用户选项 -->
                            </select>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">截止时间</label>
                            <input type="datetime-local" class="form-control" id="taskDueTime">
                        </div>
                        <div class="mb-3" id="taskProgressContainer" style="display: none;">
                            <label class="form-label">进度 (%)</label>
                            <input type="range" class="form-range" id="taskProgress" min="0" max="100" value="0" oninput="document.getElementById('progressValue').textContent = this.value + '%'">
                            <div class="d-flex justify-content-between">
                                <small>0%</small>
                                <strong id="progressValue">0%</strong>
                                <small>100%</small>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">取消</button>
                    <button type="button" class="btn btn-primary" onclick="saveTask()">保存</button>
                </div>
            </div>
        </div>
    </div>

    <!-- 十大事项模态框 -->
    <div class="modal fade" id="topItemModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="topItemModalTitle">新建事项</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="topItemForm">
                        <div class="mb-3">
                            <label class="form-label">事项标题 <span class="text-danger">*</span></label>
                            <input type="text" class="form-control" id="topItemTitle" placeholder="请输入事项标题" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">排序序号 <span class="text-danger">*</span></label>
                            <input type="number" class="form-control" id="topItemOrder" placeholder="数字越小排序越靠前" min="0" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">状态 <span class="text-danger">*</span></label>
                            <select class="form-select" id="topItemStatus" required>
                                <option value="1">显示</option>
                                <option value="0">隐藏</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">详细内容</label>
                            <textarea class="form-control" id="topItemContent" rows="4" placeholder="支持富文本内容，可粘贴格式化文本"></textarea>
                            <small class="text-muted">可用于描述事项背景、进展或图文链接。</small>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">取消</button>
                    <button type="button" class="btn btn-primary" onclick="saveTopItem()">保存</button>
                </div>
            </div>
        </div>
    </div>

    <!-- 日志详情模态框 -->
    <div class="modal fade" id="logDetailModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">日志详情</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <strong>标题：</strong>
                            <p id="logDetailTitle" class="mb-0">-</p>
                        </div>
                        <div class="col-md-6">
                            <strong>类型：</strong>
                            <p id="logDetailType" class="mb-0">-</p>
                        </div>
                    </div>
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <strong>优先级：</strong>
                            <p id="logDetailPriority" class="mb-0">-</p>
                        </div>
                        <div class="col-md-6">
                            <strong>状态：</strong>
                            <p id="logDetailStatus" class="mb-0">-</p>
                        </div>
                    </div>
                    <div class="mb-3">
                        <strong>内容：</strong>
                        <p id="logDetailContent" class="mb-0" style="white-space: pre-wrap;">-</p>
                    </div>
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <strong>开始时间：</strong>
                            <p id="logDetailTimeFrom" class="mb-0">-</p>
                        </div>
                        <div class="col-md-6">
                            <strong>结束时间：</strong>
                            <p id="logDetailTimeTo" class="mb-0">-</p>
                        </div>
                    </div>
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <strong>工作时长：</strong>
                            <p id="logDetailTotalHours" class="mb-0">-</p>
                        </div>
                        <div class="col-md-6">
                            <strong>时间标签：</strong>
                            <p id="logDetailTimeTag" class="mb-0">-</p>
                        </div>
                    </div>
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <strong>作者：</strong>
                            <p id="logDetailAuthor" class="mb-0">-</p>
                        </div>
                        <div class="col-md-6">
                            <strong>关联任务：</strong>
                            <p id="logDetailTask" class="mb-0">-</p>
                        </div>
                    </div>
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <strong>进度：</strong>
                            <p id="logDetailProgress" class="mb-0">-</p>
                        </div>
                        <div class="col-md-6">
                            <strong>创建时间：</strong>
                            <p id="logDetailCreatedAt" class="mb-0">-</p>
                        </div>
                    </div>
                    <div class="mb-3">
                        <strong>更新时间：</strong>
                        <p id="logDetailUpdatedAt" class="mb-0">-</p>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">关闭</button>
                </div>
            </div>
        </div>
    </div>

    <script src="assets/bootstrap.bundle.min.js"></script>
    <script src="app.js"></script>
</body>
</html>
